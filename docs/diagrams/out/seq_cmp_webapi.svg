<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="459px" preserveAspectRatio="none" style="width:1247px;height:459px;" version="1.1" viewBox="0 0 1247 459" width="1247px" zoomAndPan="magnify"><defs><filter height="300%" id="f1uwnbz0ip3fx8" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="549.5" y="72.9219"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="549.5" y="368.25"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="834.5" y="244.7188"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="987.5" y="155.3203"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="1148" y="309.9844"/><rect fill="#FFFFFF" filter="url(#f1uwnbz0ip3fx8)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1052.5" x="13" y="117.0547"/><rect fill="#FFFFFF" filter="url(#f1uwnbz0ip3fx8)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="916.5" x="13" y="206.4531"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="61" x2="61" y1="41.7891" y2="415.3828"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="554" x2="554" y1="41.7891" y2="415.3828"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="839.5" x2="839.5" y1="41.7891" y2="415.3828"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="992.5" x2="992.5" y1="41.7891" y2="415.3828"/><line style="stroke: #76B82A; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1152.5" x2="1152.5" y1="41.7891" y2="415.3828"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="73" x="23" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="59" x="30" y="25.7798">CMP JS</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="73" x="23" y="414.3828"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="59" x="30" y="437.1626">CMP JS</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="83" x="511" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="69" x="518" y="25.7798">Browser</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="83" x="511" y="414.3828"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="69" x="518" y="437.1626">Browser</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="156" x="759.5" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="142" x="766.5" y="25.7798">Permission Layer</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="156" x="759.5" y="414.3828"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="142" x="766.5" y="437.1626">Permission Layer</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="122" x="929.5" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="108" x="936.5" y="25.7798">Read Service</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="122" x="929.5" y="414.3828"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="108" x="936.5" y="437.1626">Read Service</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="171" x="1065.5" y="3"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="157" x="1072.5" y="25.7798">IdentWrite Service</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="33.7891" style="stroke: #76B82A; stroke-width: 1.5;" width="171" x="1065.5" y="414.3828"/><text fill="#FFFFFF" font-family="Arial" font-size="17" lengthAdjust="spacingAndGlyphs" textLength="157" x="1072.5" y="437.1626">IdentWrite Service</text><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="549.5" y="72.9219"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="549.5" y="368.25"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="834.5" y="244.7188"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="987.5" y="155.3203"/><rect fill="#76B82A" filter="url(#f1uwnbz0ip3fx8)" height="29.1328" style="stroke: #76B82A; stroke-width: 1.0;" width="10" x="1148" y="309.9844"/><polygon fill="#76B82A" points="537.5,68.9219,547.5,72.9219,537.5,76.9219,541.5,72.9219" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="543.5" y1="72.9219" y2="72.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="68.5" y="67.856">[01]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="302" x="102.5" y="67.856">Check TC string cookie in the Publisher domain.</text><polygon fill="#76B82A" points="72.5,98.0547,62.5,102.0547,72.5,106.0547,68.5,102.0547" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="553.5" y1="102.0547" y2="102.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="78.5" y="96.9888">[02]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="112.5" y="96.9888">response</text><path d="M13,117.0547 L285,117.0547 L285,124.0547 L275,134.0547 L13,134.0547 L13,117.0547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="1052.5" x="13" y="117.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="227" x="28" y="130.1216">If there is no TC string present</text><polygon fill="#76B82A" points="975.5,151.3203,985.5,155.3203,975.5,159.3203,979.5,155.3203" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="981.5" y1="155.3203" y2="155.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="68.5" y="150.2544">[03]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="172" x="102.5" y="150.2544">try to retrieve the TC string</text><polygon fill="#76B82A" points="72.5,180.4531,62.5,184.4531,72.5,188.4531,68.5,184.4531" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="991.5" y1="184.4531" y2="184.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="78.5" y="179.3872">[04]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="112.5" y="179.3872">response</text><path d="M13,206.4531 L384,206.4531 L384,213.4531 L374,223.4531 L13,223.4531 L13,206.4531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="916.5" x="13" y="206.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="326" x="28" y="219.52">If a TC String exists and permissions suffice</text><polygon fill="#76B82A" points="822.5,240.7188,832.5,244.7188,822.5,248.7188,826.5,244.7188" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="828.5" y1="244.7188" y2="244.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="68.5" y="239.6528">[05]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="720" x="102.5" y="239.6528">abort and continue processing. Otherwise display overlay for the purpose of obtaining permissions from the user.</text><polygon fill="#76B82A" points="72.5,269.8516,62.5,273.8516,72.5,277.8516,68.5,273.8516" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="838.5" y1="273.8516" y2="273.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="78.5" y="268.7856">[06]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="112.5" y="268.7856">response</text><polygon fill="#76B82A" points="1136,305.9844,1146,309.9844,1136,313.9844,1140,309.9844" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="1142" y1="309.9844" y2="309.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="68.5" y="304.9185">[07]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="702" x="102.5" y="304.9185">JS writes the TC String via the netID WRITE SERVICE, as well as (if given) the consent for identification via netID.</text><polygon fill="#76B82A" points="72.5,335.1172,62.5,339.1172,72.5,343.1172,68.5,339.1172" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="1152" y1="339.1172" y2="339.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="78.5" y="334.0513">[08]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="112.5" y="334.0513">response</text><polygon fill="#76B82A" points="537.5,364.25,547.5,368.25,537.5,372.25,541.5,368.25" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="61.5" x2="543.5" y1="368.25" y2="368.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="68.5" y="363.1841">[09]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="435" x="102.5" y="363.1841">JS also writes the TC string as a local cookie in the publisher domain.</text><polygon fill="#76B82A" points="72.5,393.3828,62.5,397.3828,72.5,401.3828,68.5,397.3828" style="stroke: #76B82A; stroke-width: 1.0;"/><line style="stroke: #76B82A; stroke-width: 1.0;" x1="66.5" x2="553.5" y1="397.3828" y2="397.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="30" x="78.5" y="392.3169">[10]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="112.5" y="392.3169">response</text><!--MD5=[ad13e77a4befff6e50f240b4183c8ece]
@startuml
skinparam sequence {
	ArrowColor #76b82a
	ActorBorderColor #76b82a
    ActorBackgroundColor #FFF
	ActorFontColor #000
    ActorFontName Arial
	ActorFontSize 17

	LifeLineBorderColor #76b82a
	LifeLineBackgroundColor #76b82a
	
	ParticipantBorderColor #76b82a
	ParticipantBackgroundColor #76b82a
	ParticipantFontName Arial
	ParticipantFontSize 17
	ParticipantFontColor #FFF

}

autonumber "<b>[00]"
participant  "CMP JS" as cmp
participant  "Browser" as br
participant  "Permission Layer" as pl
participant  "Read Service" as rs
participant  "IdentWrite Service" as ws

cmp -> br : Check TC string cookie in the Publisher domain.
activate br
br -> cmp : response
deactivate br
group If there is no TC string present
    cmp -> rs : try to retrieve the TC string
    activate rs
    rs -> cmp : response
    deactivate rs
    end
group If a TC String exists and permissions suffice
    cmp -> pl : abort and continue processing. Otherwise display overlay for the purpose of obtaining permissions from the user.
    activate pl
    pl -> cmp : response
    deactivate pl
    end
cmp -> ws : JS writes the TC String via the netID WRITE SERVICE, as well as (if given) the consent for identification via netID.
activate ws
ws -> cmp : response
deactivate ws
cmp -> br : JS also writes the TC string as a local cookie in the publisher domain.
activate br
br -> cmp : response
deactivate br
@enduml

PlantUML version 1.2020.01beta16(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>